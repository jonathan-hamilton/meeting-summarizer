# Story S3.2: Speaker CRUD Operations Interface

**Status:** PENDING ðŸ”„  
**Dependencies:** S2.7 - Manual Speaker Override Interface

## Overview

As a user, I want to manage speaker mappings through a comprehensive interface so that I can create, update, and delete speaker assignments with full control over my transcript accuracy.

## Acceptance Criteria

**CRUD Interface Requirements:**

- "Edit/Delete Mappings" button prominently displayed in the top right of TranscriptDisplay component
- Clicking the button opens a dedicated SpeakerMappingDialog for comprehensive speaker management
- Dialog displays all current speaker mappings with editable Name and Role fields
- Each speaker entry has a pencil icon for editing and trash can icon for deletion
- Dialog includes "Close" and "Update Mappings" buttons at the bottom
- "Update Mappings" button only enabled when changes have been made in the dialog

**Create Operations:**

- "Add New Speaker" functionality allows users to create new speaker mappings manually
- New speakers require Name and Role specification with real-time validation
- System prevents duplicate speaker names within the same meeting
- Newly created speakers immediately available for transcript segment assignment
- Creation metadata (timestamp, session info) preserved for audit purposes

**Update Operations:**

- In-line editing of Name and Role fields for all existing speakers
- Real-time validation prevents conflicts with existing speaker names
- Original auto-detected values preserved as fallback when speakers are manually updated
- Updated speaker names reflected immediately in transcript segment displays
- Session-scoped update history maintained for revert capabilities

**Delete Operations:**

- Confirmation dialog with impact preview before permanent speaker deletion
- Preview shows affected transcript segments and speaker count changes
- Deleted speakers removed from all transcript segment assignments with "Unassigned" labeling
- System prevents deletion if it would result in no speakers remaining
- Speaker counts and statistics updated immediately after deletion
- Cascading updates to all dependent components and displays

**Session Integration:**

- All CRUD operations integrate with session-based data handling (no persistent storage)
- Changes preserved only during current browser session with automatic cleanup
- Dialog state consistency maintained throughout all operations
- Real-time updates reflected in main TranscriptDisplay and speaker mapping components

## Developer Notes

**Frontend Implementation:**

- Enhance TranscriptDisplay component with "Edit/Delete Mappings" button placement
- Create comprehensive SpeakerMappingDialog with CRUD functionality using Material-UI components
- Implement state management for Create, Update, Delete operations with React hooks
- Add form validation and real-time feedback using Material-UI form components
- Create confirmation dialogs for destructive operations (deletion)

**Backend Integration:**

- Extend speaker mapping API endpoints to support full CRUD operations
- Implement session-based speaker creation with unique ID generation
- Add validation endpoints for speaker name conflicts and business rules
- Create bulk update capabilities for efficient dialog operations
- Implement cascade delete operations for speaker removal

**Technical Implementation:**

```tsx
interface SpeakerCRUDDialog {
  open: boolean;
  speakers: SpeakerMapping[];
  onClose: () => void;
  onUpdate: (speakers: SpeakerMapping[]) => void;
  onCreate: (speaker: Partial<SpeakerMapping>) => void;
  onDelete: (speakerId: string) => void;
  hasChanges: boolean;
}

interface SpeakerFormValidation {
  nameExists: (name: string, excludeId?: string) => boolean;
  validateRequired: (field: string) => boolean;
  getValidationErrors: () => string[];
}
```

**User Experience Considerations:**

- Intuitive icon placement and hover states for discoverability
- Loading states during CRUD operations with progress indicators
- Toast notifications for successful operations and error feedback
- Keyboard navigation support for accessibility
- Mobile-responsive dialog design for cross-device compatibility

**Time Estimate:** 8-10 hours (comprehensive CRUD interface with validation)
